/* Enhanced LaTeX/MathJax Support
 * Provides better styling for mathematical expressions
 * Supports both inline and block math with responsive design
 */

// MathJax container styling
mjx-container {
  padding-top: 10px;
  padding-bottom: 10px;
  overflow-x: auto;
  overflow-y: hidden;
  margin: 1rem 0;
  
  // Ensure proper spacing around math blocks
  &[display="true"] {
    margin: 1.5rem 0;
    text-align: center;
  }
  
  // Inline math styling
  &[display="false"] {
    margin: 0 0.2rem;
  }
}

// MathJax error styling
.MathJax_Error {
  color: #e74c3c;
  background-color: rgba(231, 76, 60, 0.1);
  padding: 0.5rem;
  border-radius: 4px;
  border: 1px solid rgba(231, 76, 60, 0.3);
  font-family: monospace;
}

// MathJax loading indicator
.MathJax_Processing {
  color: #3498db;
  font-style: italic;
}

// MathJax menu styling
.MathJax_Menu {
  background-color: #fff;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  
  .dark & {
    background-color: #2c3e50;
    border-color: #34495e;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  }
}

// MathJax tooltip styling
.MathJax_Tooltip {
  background-color: #2c3e50;
  color: #ecf0f1;
  border-radius: 4px;
  padding: 0.5rem;
  font-size: 0.9em;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

// Responsive math scaling
@media (max-width: 768px) {
  mjx-container {
    font-size: 0.9em;
    
    &[display="true"] {
      font-size: 0.85em;
    }
  }
}

@media (max-width: 480px) {
  mjx-container {
    font-size: 0.8em;
    
    &[display="true"] {
      font-size: 0.75em;
    }
  }
}

// Math block numbering (if enabled)
.math-numbered {
  counter-increment: math-counter;
  
  &::before {
    content: "(" counter(math-counter) ")";
    float: right;
    font-style: italic;
    color: var(--accent);
    margin-top: -1.5rem;
  }
}

// Math alignment classes
.math-left {
  text-align: left;
}

.math-center {
  text-align: center;
}

.math-right {
  text-align: right;
}

// MathJax accessibility improvements
.MathJax {
  // Ensure proper focus indicators for screen readers
  &:focus {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
  }
}

// Print styles for math
@media print {
  mjx-container {
    page-break-inside: avoid;
    break-inside: avoid;
  }
  
  .MathJax {
    page-break-inside: avoid;
    break-inside: avoid;
  }
}
